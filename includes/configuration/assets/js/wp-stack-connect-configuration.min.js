jQuery(document).ready(function(t){function a(a,c){var n=t("#wpstack-connect-toast"),e=n.find("#wpstack-connect-toast-message");n.on("click","[data-dismiss=toast]",function(){n.hide(),e.html(""),"success"===a?n.removeClass("fade show bg-success"):n.removeClass("fade show bg-danger")}),"success"===a?n.addClass("fade show bg-success"):n.addClass("fade show bg-danger"),e.html(c),n.show(300)}function c(t){t.text("Copied!"),setTimeout(function(){t.text("Copy")},1e3)}function n(){t.ajax({type:"post",url:wp_stack_object.ajax_url,data:{action:" update_message_status "}}).done(function(t){JSON.parse(t).reload&&location.reload()})}t("#display-config").click(function(a){t("#wpstack-connect-modal-configuration").addClass("show"),t("#wpstack-connect-modal-configuration").show(300)}),t(".auto-connect").click(function(c){var e=t(this);e.text("Connecting ..."),t.ajax({type:"post",url:wpstack_object.ajax_url,data:{action:"auto_connect"}}).done(function(t){var c=JSON.parse(t);"success"==c.status?(c.is_redirect&&setTimeout(()=>{location.href=c.redirect_url},2e3),e.text("Redirecting ...."),a(c.status,c.message)):(e.text("Auto connect"),n(),a(c.status,c.message))}).fail(function(t,a){e.text("Auto connect"),n()})}),t("[data-dismiss=modal]").click(function(a){t("#wpstack-connect-modal-configuration").removeClass("show"),t("#wpstack-connect-modal-configuration").hide()}),t(".btn-cp-pk").click(function(a){var n=t(this),e=n.parent().prev(".public-key");e.select();var o,s,i=e.val();window.isSecureContext&&navigator.clipboard?navigator.clipboard.writeText(i).then(function(){c(n)}).catch(function(t){console.error("Unable to copy to clipboard:",t)}):(o=i,s=t("<input>"),t("body").append(s),s.val(o).select(),document.execCommand("copy"),s.remove(),c(n))}),t("[data-connected=disconnected]").click(function(a){t.ajax({type:"post",url:wpstack_object.ajax_url,data:{action:"disconnected"}}).done(function(a){var c=JSON.parse(a);t(".public-key ").each(function(){t(this).val(c.public_key)}),t(".modal-footer").html('<button type="button" class="btn btn-primary disabled"><i class="fa fa-link"></i> Connect</button>')}).fail(function(t,a){})})});